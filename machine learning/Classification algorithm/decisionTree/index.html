<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxx-xx"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-xxxxxx-xx');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s an IT blog..."/>
  <meta name="keyword" content="livemylife,IT  blog,Blog"/>
  <link rel="shortcut icon" href="/myBlog/img/avatar/roguerabbit.jpg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/myBlog/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/myBlog/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/myBlog/css/highlight.css"/>
    <link rel="stylesheet" href="/myBlog/css/widget.css"/>
    <link rel="stylesheet" href="/myBlog/css/rocket.css"/>
    <link rel="stylesheet" href="/myBlog/css/signature.css"/>
    <link rel="stylesheet" href="/myBlog/css/catalog.css"/>
    <link rel="stylesheet" href="/myBlog/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/myBlog/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/myBlog/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/myBlog/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/myBlog/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/myBlog/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/myBlog/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- gitment start -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.css"/>
      <!-- gitment end -->
    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/myBlog/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://nuist-elite.github.io/myBlog/myBlog/machine learning/Classification algorithm/decisionTree/">
  <title>
    
      决策树 - either win | or lose
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--dark">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'dark';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'your-community/your-room'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/myBlog/">Programming for the future</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/myBlog/">HOME</a>
          </li>

          
          
          
          
          <li>
            <a href="/myBlog/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/myBlog/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/myBlog/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/myBlog/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
          
          
          
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/myBlog/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('/myBlog/img/header_img/go/day04.jpg');
      --intro-header-background-image-url-page: url('/myBlog//myBlog/img/header_img/go/day04.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/myBlog/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/myBlog/img/header_img/go/day04.jpg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/myBlog//myBlog/img/header_img/go/day04.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/myBlog/img/header_img/go/day04.jpg'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/myBlog/img/signature/vincent-white.png');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/myBlog/tags/#machine learning" title="machine learning">machine learning</a>
              
              <a class="tag" href="/myBlog/tags/#classification" title="classification">classification</a>
              
            </div>
            <h1>决策树</h1>
            <h2 class="subheading">决策树学习记录</h2>
            <span class="meta">
              Posted by Eric Wong on
              2022-05-10
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">25</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">6.8k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <h1>决策树算法</h1>
<p>决策树算法是机器学习中的一个经典算法。它既可以作为分类算法，也可以作为回归算法，同时也特别适合集成学习比如随机森林。本文对决策树算法原理做一个总结，包括ID3，C4.5的算法思想，以及对CART算法做一个详细的介绍。选择CART做重点介绍的原因是<strong>scikit-learn使用了优化版的CART算法作为其决策树算法的实现。</strong></p>
<h2 id="ID3算法">ID3算法</h2>
<p>决策树描述了一个做选择的过程，决策树机器学习算法使我们能够自动构建决策树，告诉我们在某些情况下我们应该预测什么结果。算法的关键在于准确的定义选择的标准。1970年代，有人提出<strong>用信息论中的熵来度量决策树的决策选择过程</strong>，这就是<strong>ID3算法</strong>。</p>
<h3 id="信息论基础">信息论基础</h3>
<p>首先要熟悉信息论中熵的概念。熵度量了事物的不确定性，<strong>越不确定的事物，他的熵就越大</strong>。对于随机变量$X$，它的熵表达式为：<br>
$$ H(X) = -\sum\limits_{i=1}^{n}p_i logp_i $$<br>
其中n代表X的n种不同的离散取值。而$p_i$代表了X取值为i的概率，log为以2或者e为底的对数。比如对于变量X，它有两个可能的取值，而这两个取值概率各为1/2时X的熵最大，此时X具有最大的不确定性，即熵为$H(X) = -(\frac{1}{2}log\frac{1}{2} + \frac{1}{2}log\frac{1}{2}) = log2$。如果一个值概率大于1/2，另一个值概率小于1/2，则不确定性减少，对应的熵也会减少。比如一个概率1/3，一个概率2/3，则对应熵为$H(X) = -(\frac{1}{3}log\frac{1}{3} + \frac{2}{3}log\frac{2}{3}) = (log3 - \frac{2}{3}log2) &lt; log2$。</p>
<p>由一个变量的熵表达式，可以推导出多个变量的联合熵表达式。对于两个变量X和Y的联合熵表达式：<br>
$$ H(X,Y) = -\sum\limits_{x_i \in X}\sum\limits_{y_i \in Y}p(x_i,y_i)logp(x_i,y_i) $$<br>
在联合熵的基础上，可以得到条件熵的表达式$H(X|Y)$，条件熵类似条件概率，度量了X在已知Y的情况下的不确定性。具体表达式如下：<br>
$$ H(X|Y) = -\sum\limits_{x_i \in X}\sum\limits_{y_i \in Y}p(x_i,y_i)logp(x_i|y_i) = \sum\limits_{j=1}^{n}p(y_j)H(X|y_j) $$<br>
通过之前得到的表达式H(X)和H(X|Y)，可以使用表达式$H(X)-H(X|Y)$来确定X在知道Y以后不确定性减少程度，这个度量在信息论中称为互信息，记为$I(X, Y)$, 在ID3算法中称作<strong>信息增益（Information gain）</strong>，ID3算法的核心就是通过信息增益判断当前节点应选用哪一个特征去构建决策树。<strong>信息增益越大，越适合用来做分类</strong>。</p>
<p>用下面这个图很容易明白他们的关系。左边的椭圆代表H(X),右边的椭圆代表H(Y),中间重合的部分就是我们的互信息或者信息增益I(X,Y), 左边的椭圆去掉重合部分就是H(X|Y),右边的椭圆去掉重合部分就是H(Y|X)。两个椭圆的并就是H(X,Y)。<br>
<img src="1.png" alt="IG"></p>
<h3 id="ID3算法的思路">ID3算法的思路</h3>
<p>根据以上得到的结论与公式，用一个具体的例子看一下信息增益的计算。现有一个大小为15的样本D，它满足：</p>
<ol>
<li>输出为0或1</li>
<li>9个输出为1，6个输出为0</li>
<li>样本有一个特征A，A的取值为A1，A2和A3，其中：
<ul>
<li>取值为A1的样本中，3个输出为1，2个输出为0</li>
<li>取值为A2的样本中，2个输出为1，3个输出为0</li>
<li>取值为A3的样本中，4个输出为1，1个输出为0</li>
</ul>
</li>
</ol>
<p>根据上述条件，首先计算得到样本D的熵$H(D)$为：<br>
$$ H(D) = -(\frac{9}{15}log_2\frac{9}{15} + \frac{6}{15}log_2\frac{6}{15}) = 0.971 $$<br>
样本D在特征A条件下的条件熵为：</p>
<p>$ H(D|A) = \frac{5}{15}H(D1) + \frac{5}{15}H(D2) + \frac{5}{15}H(D3) $<br>
$=  -\frac{5}{15}(\frac{3}{5}log_2\frac{3}{5} + \frac{2}{5}log_2\frac{2}{5}) - \frac{5}{15}(\frac{2}{5}log_2\frac{2}{5} + \frac{3}{5}log_2\frac{3}{5}) -\frac{5}{15}(\frac{4}{5}log_2\frac{4}{5} + \frac{1}{5}log_2\frac{1}{5})$<br>
$ = 0.888 $</p>
<blockquote>
<p>其中D1代表样本D的特征A取值为A1的子样本的熵，以此类推</p>
</blockquote>
<p>对应的信息增益为：<br>
$$ I(D,A) = H(D) - H(D|A) = 0.083 $$</p>
<p>现在根据一个具体的例子来看算法的完整流程：已知输入的是m个样本，样本输出集合为D，每个样本有n个<strong>离散特征</strong>，特征集合即为A，输出为决策树T。算法流程如下：</p>
<ol>
<li>初始化<strong>信息增益阈值$\epsilon$</strong>。如果某一步得到的<strong>最大信息增益</strong>小于该阈值，则不再需要进行分类。</li>
<li>判断样本输出是否为同一类输出$D_i$，如果是则返回单节点树T，标记类别为$D_i$。</li>
<li>判断特征是否为空，如果特征为空，则返回单节点树T，<strong>标记类别为样本中输出类别D实例数最多的类别</strong>。</li>
<li>计算A中的各个特征（一共n个）对输出D的信息增益，<strong>选择信息增益最大的特征$A_g$</strong>。</li>
<li>如果$A_g$的信息增益<strong>小于阈值ϵ</strong>，则返回单节点树T，标记类别为样本中输出类别D实例数最多的类别。</li>
<li>否则，按特征$A_g$的不同取值$A_{gi}$将对应的样本输出D分成不同的类别$D_i$。每个类别产生一个子节点。对应特征值为$A_{gi}$。返回增加了节点的树T。</li>
<li>对于所有的子节点，令$D=D_i,  A= A-{A_g}$递归调用2-6步，得到子树$T_i$并返回。</li>
</ol>
<h2 id="C4-5算法">C4.5算法</h2>
<h3 id="ID3算法的不足">ID3算法的不足</h3>
<ol>
<li><strong>ID3算法没有考虑连续特征</strong>。如长度，密度等常用指标都是连续型变量，无法在ID3使用。</li>
<li>ID3采用信息收益大的特征作为建立决策树的节点。但在相同条件下，<strong>取值更多的特征会有更高的信息增益</strong>。如其中一个特征有两种取值，分别概率1/2，另一个特征三种取值，分别概率1/3，显然两者都属于完全不确定变量，但前者的信息增益会比后者高，这显然是不可取的。</li>
<li>ID3算法对于<strong>缺失值</strong>的情况没有做考虑。</li>
<li>没有考虑过拟合的问题。</li>
</ol>
<p>基于上述不足，ID3算法的作者做了改进，也就是<strong>C4.5算法</strong>。</p>
<h3 id="C4-5算法的改进">C4.5算法的改进</h3>
<p>针对上述的不足之处，C4.5算法对每一点都进行了改进。</p>
<p>对于<strong>第一个问题，不能处理连续特征</strong>，C4.5的思路是<strong>将连续的特征离散化</strong>。比如一共有m个样本，某一特征A为连续特征，取值从小到大为${a_1,a_2,…,a_m}$，C4.5算法取相邻两样本的平均数作为划分点，<strong>一共m-1个划分点</strong>，其中第i个划分点$T_i$表示为$T_i = \frac{a_i+a_{i+1}}{2}$。对于这m-1个点，分别计算以该点作为二元分类点时的信息增益，并选择信息增益最大的点作为该特征的二元离散分类点。比如取到最大的信息增益点为$T_t$，则小于$T_t$的值为类别1，大于$T_t$的值为类别2。</p>
<blockquote>
<p>要注意的是，与离散属性不同的是，如果当前节点为连续属性，则该属性后面还可以参与子节点的产生选择过程。</p>
</blockquote>
<p>对于<strong>第二个问题，信息增益作为标准容易偏向于取值较多的特征</strong>，C4.5算法引入了<strong>信息增益比</strong>：$I_R(X,Y)$，它是信息增益与特征熵的比值，具体表达式如下：<br>
$$ I_R(D,A) = \frac{I(A,D)}{H_A(D)} $$<br>
其中D为样本特征输出的集合，A为样本特征，对于特征熵$H_A(D)$, 表达式如下：<br>
$$ H_A(D) = -\sum\limits_{i=1}^{n}\frac{|D_i|}{|D|}log_2\frac{|D_i|}{|D|} $$<br>
其中n为特征A的类别数， Di为特征A的第i个取值对应的样本个数。|D|为样本个数。<strong>特征数越多的特征对应的特征熵越大，它作为分母，可以校正信息增益容易偏向于取值较多的特征的问题。</strong></p>
<p>对于<strong>第三个缺失值处理的问题</strong>，C4.5通过一种概率权重（Probability weights）的方法来处理，主要分为两步：</p>
<ul>
<li>第一步，对于某一个有缺失特征值的特征A。计算所有特征的信息增益或者信息增益比的时候，假设数据集一共10000个样本，特征A中缺失了5000个，则无视缺失值，在剩下的5000个特征中计算信息增益（或者信息增益率），最后乘以0.5，思想就是缺失值多的特征通过这种降低权重的方式来体现信息的缺失；</li>
<li>第二步，如果正好这个A特征乘0.5之后得到的信息增益或者信息增益比还是最大的，那么存在缺失值的样本按照比例进入分裂之后的新的分支，假设根据特征A分裂得到两个新的分支，一个分支有2000个样本有2000个样本，一个分支有3000个样本，则按照比例2000个缺失值和3000个缺失值样本分别进入两个分支。</li>
</ul>
<p>对于第4个问题，<strong>C4.5引入了正则化系数进行初步的剪枝</strong>。下文讲CART的时候会详细介绍剪枝的思路。</p>
<h3 id="C4-5算法的不足">C4.5算法的不足</h3>
<ol>
<li>由于决策树算法非常容易过拟合，因此对于生成的决策树必须要进行剪枝。剪枝的算法有非常多，C4.5的剪枝方法有优化的空间。思路主要是两种，一种是<strong>预剪枝</strong>，即在生成决策树的时候就决定是否剪枝。另一个是<strong>后剪枝</strong>，即先生成决策树，再通过交叉验证来剪枝。后面在讲CART树的时候会专门讲决策树的减枝思路，主要采用的是<strong>后剪枝加上交叉验证</strong>选择最合适的决策树。</li>
<li>C4.5生成的是多叉树，即一个父节点可以有多个节点。很多时候，在计算机中二叉树模型会比多叉树运算效率高。如果采用二叉树，可以提高效率。</li>
<li>C4.5只能用于分类，如果能将决策树用于回归的话可以扩大它的使用范围。</li>
<li>C4.5由于使用了熵模型，里面有大量的耗时的对数运算，如果是连续值还有大量的排序运算。</li>
</ol>
<p>这些问题在<strong>Cart树</strong>中得到了改进。不考虑集成学习的话，CART算法算是相对较优秀的算法。scikit-learn也是用的这个算法实现了决策树模型。</p>
<h2 id="CART分类树算法">CART分类树算法</h2>
<p>ID3算法和C4.5算法分别使用了信息增益和信息增益比来作为选择分类特征的标准，它们都涉及了大量的对数运算，导致模型复杂，运行速度慢。CART算法<strong>通过使用基尼系数替代信息增益比来改善这一点</strong>。<strong>基尼系数</strong>代表了模型的不纯度，基尼系数越小，不纯度越低，特征就越好。这和信息增益比是相反的。</p>
<p>具体来说，在一个分类问题中，假设有K个类别，第k个类别的概率为$p_k$，则基尼系数的表达式为：<br>
$$ Gini§ = \sum\limits_{k=1}^{K}p_k(1-p_k) = 1- \sum\limits_{k=1}^{K}p_k^2 $$<br>
如果是二类分类问题，计算就更加简单了，如果属于第一个样本输出的概率是p，则基尼系数的表达式为：<br>
$$ Gini§ = 2p(1-p) $$<br>
对于个给定的样本D，假设有K个类别，第k个类别的数量为Ck，则样本D的基尼系数表达式为：<br>
$$ Gini(D) = 1-\sum\limits_{k=1}^{K}(\frac{|C_k|}{|D|})^2 $$<br>
特别的，对于样本D,如果根据特征A的某个值a,把D分成$D_1$和$D_2$两部分，则在特征A的条件下，D的基尼系数表达式为：<br>
$$ Gini(D,A) = \frac{|D_1|}{|D|}Gini(D_1) + \frac{|D_2|}{|D|}Gini(D_2) $$<br>
对比基尼系数和熵模型的表达式，可以看出悉尼模型仅需做二次运算，明显会比熵模型的对数运算好很多。但基尼系数相较于熵模型还是存在一定误差，两者曲线如下：<br>
<img src="2.jpg" alt="line"><br>
从上图可以看出，两者还是非常接近的，因此基尼系数可以作为熵模型的一个近似替代。CART树就是用基尼系数作为选择决策树的特征。同时，为了进一步简化，CART分类树算法每次仅仅对某个特征的值进行<strong>二分</strong>，而不是多分，这样<strong>CART分类树算法建立起来的是二叉树，而不是多叉树</strong>。这样一可以进一步简化基尼系数的计算，二可以建立一个更加优雅的二叉树模型。</p>
<h2 id="CART对离散和连续特征的处理方式">CART对离散和连续特征的处理方式</h2>
<h3 id="连续特征">连续特征</h3>
<p>CART的处理连续特征的思想与C4.基本相同，也是通过将特征离散化，不同的点在于选择划分点时的规则不同，C4.5使用的信息增益比，CART使用的是基尼系数。</p>
<p>具体的思路如下，比如m个样本的连续特征A有m个，从小到大排列为$a_1,a_2,…,a_m$,则CART算法取相邻两样本值的平均数，一共取得m-1个划分点，其中第i个划分点$T_i$表示为：$T_i=\frac{a_i+a_{i+1}}{2}$。对于这m-1个点，分别计算以该点作为二元分类点时的基尼系数。选择基尼系数最小的点作为该连续特征的二元离散分类点。比如取到的基尼系数最小的点为$a_t$,则小于$a_t$的值为类别1，大于$a_t$的值为类别2，这样我们就做到了连续特征的离散化。要注意的是，与ID3或者C4.5处理离散属性不同的是，如果当前节点为连续属性，则该属性后面还可以参与子节点的产生选择过程。</p>
<h3 id="离散特征">离散特征</h3>
<p>CART算法处理离散特征，采用的思路是不停的二分离散特征。</p>
<p>回忆下ID3或者C4.5，如果某个特征A被选取建立决策树节点，如果它有A1,A2,A3三种类别，我们会在决策树上一下建立一个三叉的节点。这样导致决策树是多叉树。但是CART分类树使用的方法不同，他采用的是不停的二分，还是这个例子，<strong>CART分类树会考虑把A分成{A1}和{A2,A3}, {A2}和{A1,A3}, {A3}和{A1,A2}三种情况，找到基尼系数最小的组合，比如{A2}和{A1,A3},然后建立二叉树节点，一个节点是A2对应的样本，另一个节点是{A1,A3}对应的节点</strong>。同时，由于这次没有把特征A的取值完全分开，后面我们还有机会在子节点继续选择到特征A来划分A1和A3。这和ID3或者C4.5不同，在ID3或者C4.5的一棵子树中，离散特征只会参与一次节点的建立。这样做就建立了一颗二叉树而不是多叉树。</p>
<h2 id="CART分类树建立算法">CART分类树建立算法</h2>
<p>建立算法主要讲的是决策树的建立过程，关于剪枝部分记录在了后面的章节。</p>
<p>算法从根节点开始，用训练集D递归的建立CART树。</p>
<ol>
<li>对于当前节点的数据集为D，如果<strong>样本个数小于阈值或者没有特征</strong>，则返回决策子树，当前节点停止递归。</li>
<li>计算样本集D的基尼系数，如果<strong>基尼系数小于阈值</strong>，则返回决策树子树，当前节点停止递归。</li>
<li>计算当前节点现有的各个特征的各个特征值对数据集D的基尼系数，对于离散值和连续值的处理方法和基尼系数的计算见上一节。缺失值的处理方法和上篇的C4.5算法里描述的相同。</li>
<li>在计算出来的各个特征的各个特征值对数据集D的基尼系数中，<strong>选择基尼系数最小的特征A和对应的特征值a</strong>。根据这个最优特征和最优特征值，把数据集划分成两部分D1和D2，同时建立当前节点的左右节点，做节点的数据集D为D1，右节点的数据集D为D2。</li>
<li>递归调用1-4生成决策树。</li>
</ol>
<blockquote>
<p>对于生成的决策树做预测的时候，假如测试集里的样本A落到了某个叶子节点，而节点里有多个训练样本。则对于A的类别预测采用的是这个叶子节点里概率最大的类别。</p>
</blockquote>
<h2 id="CART回归树建立算法">CART回归树建立算法</h2>
<p>回归树与分类树的区别在于样本输出，如果样本输出是<strong>离散值</strong>，那么这是一颗<strong>分类树</strong>。如果果样本输出是<strong>连续值</strong>，那么那么这是一颗<strong>回归树</strong>。</p>
<p>除了概念的不同，CART回归树和CART分类树的建立和预测的区别主要有下面两点：</p>
<ul>
<li>连续值的处理方法不同</li>
<li>决策树建立后做预测的方法不同</li>
</ul>
<p>其中比较关键的一点在于连续值的处理方式。在之前的分类树中，CART对于每一个特征，通过不同的划分点求对应的基尼系数来确定划分点。而在回归树中，使用的是SSR（Sum of squared residuals）来确定划分点，对于任意划分特征A，对应的任意划分点s两边划分成的数据集D1和D2，求出<strong>使D1和D2各自集合的均方差最小，同时D1和D2的均方差之和最小所对应的特征和特征值划分点</strong>。表达式为：<br>
$$ \underbrace{min}<em>{A,s}\Bigg[\underbrace{min}</em>{c_1}\sum\limits_{x_i \in D_1(A,s)}(y_i - c_1)^2 + \underbrace{min}<em>{c_2}\sum\limits</em>{x_i \in D_2(A,s)}(y_i - c_2)^2\Bigg] $$<br>
这个表达式较难理解，下面说一下计算的具体思想。现有样本D，连续（或离散，在这个方法中本质是一样的）特征A，B，C，假设计算时不会触发结束条件:</p>
<ol>
<li>首先取第一个特征A，假设他有m个值，则根据之前说的规则，划出m-1个划分点。</li>
<li>取第一个划分点，将划分点左侧样本称为D1，右侧称为D2。对每一侧的样本，计算每一个<strong>个体的特征A的值与这一侧样本特征A的平均值的差的平方</strong>，并求和。<strong>将两侧的求和结果相加，得到的就是SSR</strong>。</li>
<li>对剩下的m-2个划分点，重复第2步的操作，算出所有的SSR。之后取<strong>最小</strong>的一个SSR，作为该特征的<strong>最优划分点</strong>。</li>
<li>之后对B，C特征重复2-3步，得到它们的最小的SSR和最优划分点。</li>
<li>对比三个SSR，其中最小的那一个对应的特征，就是最优特征，对应的划分点就是最优划分点。</li>
</ol>
<p>对于决策树建立后做预测的方式，上面讲到了CART分类树采用叶子节点里概率最大的类别作为当前节点的预测类别。而回归树输出不是类别，它<strong>采用的是用最终叶子的均值或者中位数来预测输出结果</strong>。</p>
<h2 id="CART树算法的剪枝">CART树算法的剪枝</h2>
<p>CART回归树和CART分类树的剪枝策略除了在度量损失的时候一个使用均方差，一个使用基尼系数，算法基本完全一样，这里一起来讲。</p>
<p>剪枝的目的是为了防止<strong>过拟合</strong>。比如决策树分到最后每一个叶子节点只代表一条训练数据，那就意味着模型过度的拟合在训练集上，导致在新的数据集上会表现得不好。这里的剪枝类似于线性回归中的<strong>正则化</strong>。CART采用的办法是<strong>后剪枝法</strong>，即先生成决策树，然后产生所有可能的剪枝后的CART树，然后使用交叉验证来检验各种剪枝的效果，选择泛化能力最好的剪枝策略。</p>
<p>首先看看剪枝的损失函数度量，在剪枝的过程中，对于任意的一刻子树T,其损失函数为：<br>
$$ C_{\alpha}(T_t) = C(T_t) + \alpha |T_t| $$<br>
其中$\alpha$为正则化参数，$C(T_t)$为训练数据的预测误差，分类树使用基尼系数，回归树使用均方差SSR。$|T_t|$是子树T的<strong>叶子节点的数量</strong>。</p>
<p>$\alpha=0$时，原始生成的树即为最优树，而$\alpha=\infty$时，正则化强度达到最大，此时由原始生成的树的根节点组成的单节点树即为最优树。从这两种极端情况可以看出，<strong>$\alpha$越大，剪枝就越厉害，最优子树就更小</strong>。对于固定的$\alpha$，一定存在使损失函数最小的最优子树。</p>
<p>剪枝的思路如下。对于位于节点t的任意一颗子树$T_t$，如果没有剪枝，它的损失是：<br>
$$ C_{\alpha}(T_t) = C(T_t) + \alpha |T_t| $$</p>
<blockquote>
<p>$T_t$为以t节点为根节点的子树。</p>
</blockquote>
<p>如果将节点t的子树剪枝，仅保留根节点（t本身），则损失为：<br>
$$ C_{\alpha}(T) = C(T) + \alpha $$</p>
<blockquote>
<p>T代表的就是t节点本身。</p>
</blockquote>
<p>可以看到当$\alpha$为0或很小时，$C_{\alpha}(T_t)&lt;C_{\alpha}(T)$，说明此时未剪枝时的子树损失小于剪枝后的，所以为了使两者损失接近相等，需要继续增大$\alpha$的值。当$\alpha$继续增大时之前的不等式就会反向，所以只要$\alpha$可以使之前的两者损失相等即$C_{\alpha}(T_t) = C_{\alpha}(T)$，就满足了可以剪枝的条件。对该等式做变换可得：<br>
$$ \alpha = \frac{C(T)-C(T_t)}{|T_t|-1} $$<br>
也就是满足该等式时，两者损失相等，但<strong>剪枝后的子树节点数更少</strong>，所以可以将节点t进行剪枝，也就是剪掉所有子节点，只保留根节点，使子树t变为一个叶子节点。</p>
<p>在跟据上述方法计算出每一颗子树是否剪枝的阈值$\alpha$，然后分别针对不同的$α$所对应的剪枝后的最优子树做交叉验证。这样就可以选择一个最好的$α$，有了这个$α$，我们就可以用对应的最优子树作为最终结果。</p>
<p>剪枝算法的具体流程如下，其中输入是CART树建立算法得到的原始决策树$T_0$。输出是最优决策子树$T_α$：</p>
<ol>
<li>初始化$k=0, T=T_0$，最优子树集合$\omega={T}$</li>
<li>$\alpha_{min}= \infty$</li>
<li>从叶子节点开始自下而上计算各内部节点t的训练误差损失函数$C_α(T_t)$（回归树为均方差，分类树为基尼系数）, 叶子节点数$|T_t|$，以及正则化阈值$\alpha= min{\frac{C(T)-C(T_t)}{|T_t|-1}, \alpha_{min}}$, 更新$α_{min}=α$。</li>
<li>$\alpha_k = \alpha_{min}$</li>
<li>自上而下的访问子树t的内部节点，如果$\frac{C(T)-C(T_t)}{|T_t|-1} \leq \alpha_k$时，进行剪枝。并决定叶节点t的值。如果是分类树，则是概率最高的类别，如果是回归树，则是所有样本输出的均值。这样得到$α_k$对应的最优子树$T_k$</li>
<li>最优子树集合$\omega=\omega \cup T_k$</li>
<li>$k=k+1，T=T_k$，如果T不是单节点树，则重复2-6步继续增加最优子树。否则已经得到最优子树集合，继续下一步。</li>
<li>采用交叉验证在$ω$选择最优子树$T_α$</li>
</ol>
<h2 id="不同决策树算法对比">不同决策树算法对比</h2>
<table>
<thead>
<tr>
<th style="text-align:left">算法</th>
<th style="text-align:right">支持模型</th>
<th style="text-align:center">树结构</th>
<th style="text-align:left">特征选择</th>
<th style="text-align:right">连续值处理</th>
<th style="text-align:center">缺失值处理</th>
<th style="text-align:center">剪枝</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ID3</td>
<td style="text-align:right">分类</td>
<td style="text-align:center">多叉树</td>
<td style="text-align:left">信息增益</td>
<td style="text-align:right">不支持</td>
<td style="text-align:center">不支持</td>
<td style="text-align:center">不支持</td>
</tr>
<tr>
<td style="text-align:left">C4.5</td>
<td style="text-align:right">分类</td>
<td style="text-align:center">多叉树</td>
<td style="text-align:left">信息增益比</td>
<td style="text-align:right">支持</td>
<td style="text-align:center">支持</td>
<td style="text-align:center">支持</td>
</tr>
<tr>
<td style="text-align:left">CART</td>
<td style="text-align:right">分类，回归</td>
<td style="text-align:center">二叉树</td>
<td style="text-align:left">基尼系数，均方差</td>
<td style="text-align:right">支持</td>
<td style="text-align:center">支持</td>
<td style="text-align:center">支持</td>
</tr>
</tbody>
</table>
<p>可以看出CART算法非常优秀，不过还有些缺点：</p>
<ul>
<li>CART树与另外两个决策树算法一样，都是选择最有的一个特征进行分类，但是大多数情况下，分类决策不应该是由某一个特征决定的，而是应该由一组特征决定的。这样决策得到的决策树更加准确。这个决策树叫做<strong>多变量决策树(multi-variate decision tree)</strong>。在选择最优特征的时候，多变量决策树不是选择某一个最优特征，而是选择最优的一个特征线性组合来做决策。这个算法的代表是OC1。</li>
<li>样本的小改动都会导致树结构的剧烈改变。这可以用集成学习中的<strong>随机森林算法</strong>解决。</li>
</ul>
<h2 id="决策树小结">决策树小结</h2>
<p>该节根据scikit-learn文档总结</p>
<h3 id="优点">优点</h3>
<ol>
<li>简单直观，生成的决策树很直观。</li>
<li>基本不需要预处理，不需要提前归一化，处理缺失值。</li>
<li>使用决策树预测的代价是$O(log_2m)$。 m为样本数。</li>
<li>既可以处理离散值也可以处理连续值。很多算法只是专注于离散值或者连续值。</li>
<li>可以处理多维度输出的分类问题。</li>
<li>相比于神经网络之类的黑盒分类模型，决策树在逻辑上可以得到很好的解释</li>
<li>可以交叉验证的剪枝来选择模型，从而提高泛化能力。</li>
<li>对于异常点的容错能力好，健壮性高。</li>
</ol>
<h3 id="缺点">缺点</h3>
<ol>
<li>决策树算法非常容易过拟合，导致泛化能力不强。可以通过设置节点最少样本数量和限制决策树深度来改进。</li>
<li>决策树会因为样本发生一点点的改动，就会导致树结构的剧烈改变。这个可以通过集成学习之类的方法解决。</li>
<li>寻找最优的决策树是一个NP难的问题，我们一般是通过启发式方法，容易陷入局部最优。可以通过集成学习之类的方法来改善。</li>
<li>有些比较复杂的关系，决策树很难学习，比如异或。这个就没有办法了，一般这种关系可以换神经网络分类方法来解决。</li>
<li>如果某些特征的样本比例过大，生成决策树容易偏向于这些特征。这个可以通过调节样本权重来改善。</li>
</ol>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/myBlog/machine learning/Classification algorithm/knn/" data-toggle="tooltip" data-placement="top" title="K近邻算法">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/myBlog/machine learning/Classification algorithm/perceptron/" data-toggle="tooltip" data-placement="top" title="感知机">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=决策树&body=Hi,I found this website and thought you might like it https://nuist-elite.github.io/myBlog/myBlog/machine learning/Classification algorithm/decisionTree/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/myBlog/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: '',
      clientSecret: '',
      repo: '',
      owner: '',
      admin: '',
      id: 'Tue May 10 2022 21:36:18 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->

  <!-- gitment start -->
  <!-- Docs:https://github.com/imsun/gitment -->

  <div id="blog_comments"></div>
  <!-- <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"> <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script> -->

  <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.js"></script>

  <script>
    const myTheme = {
      render(state, instance) {
        const container = document.createElement('div')
        container.lang = "en-US"
        container.className = 'gitment-container gitment-root-container'

        // your custom component
        container.appendChild(instance.renderSomething(state, instance))
        container.appendChild(instance.renderHeader(state, instance))
        container.appendChild(instance.renderEditor(state, instance))
        container.appendChild(instance.renderComments(state, instance))
        container.appendChild(instance.renderFooter(state, instance))
        return container
      },
      renderSomething(state, instance) {
        const container = document.createElement('div')
        container.lang = "en-US"
        container.className = 'hello_visitor'
        if (state.user.login) {
          container.innerText = `Hello ${state.user.login}, Welcome to comment system`
        }
        return container
      }
    }

    const gitment = new Gitment({
      id: 'Tue May 10 2022 21:36:18 GMT+0800', // optional
      owner: 'NUIST-elite',
      repo: 'git@github.com:NUIST-elite/blog-comment.git',
      oauth: {
        client_id: 'a8536bceb8b28d0df731',
        client_secret: '696da9430a77d9bfafcbbc62d88eb7196e426c35'
      },
      desc: '',
      perPage: '10',
      maxCommentHeight: '250',
      theme: myTheme,
      // ... For more available options, check out the documentation below
    })

    gitment.render('blog_comments')
    // or gitment.render(document.getElementById('comments')) or document.body.appendChild(gitment.render())
  </script>

  <!-- gitment end -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">决策树算法</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ID3%E7%AE%97%E6%B3%95"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">ID3算法</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%BF%A1%E6%81%AF%E8%AE%BA%E5%9F%BA%E7%A1%80"><span class="toc-nav-number">1.1.1.</span> <span class="toc-nav-text">信息论基础</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ID3%E7%AE%97%E6%B3%95%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-nav-number">1.1.2.</span> <span class="toc-nav-text">ID3算法的思路</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#C4-5%E7%AE%97%E6%B3%95"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">C4.5算法</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ID3%E7%AE%97%E6%B3%95%E7%9A%84%E4%B8%8D%E8%B6%B3"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">ID3算法的不足</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#C4-5%E7%AE%97%E6%B3%95%E7%9A%84%E6%94%B9%E8%BF%9B"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">C4.5算法的改进</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#C4-5%E7%AE%97%E6%B3%95%E7%9A%84%E4%B8%8D%E8%B6%B3"><span class="toc-nav-number">1.2.3.</span> <span class="toc-nav-text">C4.5算法的不足</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#CART%E5%88%86%E7%B1%BB%E6%A0%91%E7%AE%97%E6%B3%95"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">CART分类树算法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#CART%E5%AF%B9%E7%A6%BB%E6%95%A3%E5%92%8C%E8%BF%9E%E7%BB%AD%E7%89%B9%E5%BE%81%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">CART对离散和连续特征的处理方式</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%BF%9E%E7%BB%AD%E7%89%B9%E5%BE%81"><span class="toc-nav-number">1.4.1.</span> <span class="toc-nav-text">连续特征</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%A6%BB%E6%95%A3%E7%89%B9%E5%BE%81"><span class="toc-nav-number">1.4.2.</span> <span class="toc-nav-text">离散特征</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#CART%E5%88%86%E7%B1%BB%E6%A0%91%E5%BB%BA%E7%AB%8B%E7%AE%97%E6%B3%95"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">CART分类树建立算法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#CART%E5%9B%9E%E5%BD%92%E6%A0%91%E5%BB%BA%E7%AB%8B%E7%AE%97%E6%B3%95"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text">CART回归树建立算法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#CART%E6%A0%91%E7%AE%97%E6%B3%95%E7%9A%84%E5%89%AA%E6%9E%9D"><span class="toc-nav-number">1.7.</span> <span class="toc-nav-text">CART树算法的剪枝</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%8D%E5%90%8C%E5%86%B3%E7%AD%96%E6%A0%91%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94"><span class="toc-nav-number">1.8.</span> <span class="toc-nav-text">不同决策树算法对比</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%86%B3%E7%AD%96%E6%A0%91%E5%B0%8F%E7%BB%93"><span class="toc-nav-number">1.9.</span> <span class="toc-nav-text">决策树小结</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-nav-number">1.9.1.</span> <span class="toc-nav-text">优点</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-nav-number">1.9.2.</span> <span class="toc-nav-text">缺点</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/myBlog/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/myBlog/tags/#machine learning" title="machine learning">machine learning</a>
            
            <a class="tag" href="/myBlog/tags/#classification" title="classification">classification</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/NUIST-elite">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Eric Wong
          2022
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/myBlog/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/myBlog/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/myBlog/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/myBlog/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="/myBlog/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/myBlog/js/mouseclick.js" content='The first step is as good as half over...,Laugh and grow fat...,Man proposes God disposes...,When all else is lost the future still remains...,Wasting time is robbing oneself...,Sharp tools make good work...,Cease to struggle and you cease to live...,A friend in need is a friend indeed...,Faith can move mountains...' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/myBlog/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/myBlog/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/myBlog/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://nuist-elite.github.io/myBlog/myBlog/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/myBlog/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/myBlog/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/myBlog/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>
